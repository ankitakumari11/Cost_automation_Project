{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" 
          content="width=device-width, initial-scale=1.0">
    <title>Cost Automation</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/report_style.css' %}">
 <style>
        
    </style>
    <script>
        let TableId = ""; // Track which table is displayed
        function showTable(tableId) {
            TableId=tableId
            // Hide all table sections
            document.querySelectorAll('.table-section').forEach(section => {
                section.style.display = 'none';
            });
            // Show the selected table
            document.getElementById(tableId).style.display = 'block';
        }

        function exportTable() {
            if (!TableId) {
                alert("No table is selected. Please select a table first.");
                return;
            }
            // Redirect to the export URL with the selected table ID
            window.location.href = `/export_table/?table_id=${TableId}`;
        }
    </script>
</head>
<body>
</div>
    <div class="navbar">
        {% load static %}
          <a href="#"><img src="{% static 'img/logo.png' %}" width="55" height="30"></a>
           <div class="navbar-centered">
            
            <a href="#home">Reports</a>
          </div>
          {% comment %} <button class="btn btn-new" onclick="window.location.href='{% url 'logout' %}'">Logout</button> {% endcomment %}
        </div>
        
    <div class="split-container">
      
        <div class="split-left">
            <button class="custom-button" onclick="showTable('costSummary')">Cost Summary</button>
<button class="custom-button" onclick="showTable('projectResourceUtilisation')">Project Resource Utilisation</button>
{% comment %} <button class="custom-button" onclick="showTable('scopingForms')">Scoping Forms</button> {% endcomment %}
<button class="custom-button" onclick="showTable('yearlyCostSummary')">Yearly Cost Summary</button>
     <!-- Export button -->
    <button class="custom-button" onclick="exportTable()">Export Table</button>      
                
            </div>
    
        <div class="split-right">
     
           <!-- Sections for each table -->
    <div id="costSummary" class="table-section">
        <h2 class="sticky-header">Cost Summary</h2>
        <table border="1">
            <thead>
                <tr>
                    {% for column in cost_summary.columns %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in cost_summary.rows %}
                <tr>
                    {% for cell in row %}
                    <td>{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div id="projectResourceUtilisation" class="table-section">
        <h2 class="sticky-header">Project Resource Utilisation</h2>
        <table border="1">
            <thead>
                <tr>
                    {% for column in project_resource_utilisation.columns %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in project_resource_utilisation.rows %}
                <tr>
                    {% for cell in row %}
                    <td>{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% comment %} <div id="scopingForms" class="table-section">
        <h2 class="sticky-header">Scoping Forms</h2>
        <table border="1">
            <thead>
                <tr>
                    {% for column in scoping_forms.columns %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in scoping_forms.rows %}
                <tr>
                    {% for cell in row %}
                    <td>{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div> {% endcomment %}
    <div id="yearlyCostSummary" class="table-section">
        <h2 class="sticky-header">Yearly Cost Summary</h2>
        <table border="1">
            <thead>
                <tr>
                    {% for column in yearly_cost_summary.columns %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in yearly_cost_summary.rows %}
                <tr>
                    {% for cell in row %}
                    <td>{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
   
        </div>
    </div>

    
</body>
</html>
 
